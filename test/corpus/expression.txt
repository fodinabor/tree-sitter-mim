=====
annotated
=====

let x = 3: Idx 4;

---

(source_file
	(let
		(pattern
			(value_identifier))
		value: (annotated
			value: (int_literal)
			type: (primitive_type (int_literal)))))

=====
application
=====

let x = foo bar 0;

---

(source_file
	(let
		(pattern
			(value_identifier))
		value: (application
			(application
				(value_identifier)
				(value_identifier))
			(int_literal))))

=====
explicit application
=====

let x = foo @ bar 0;

---

(source_file
	(let
		(pattern
			(value_identifier))
		value: (application
			(value_identifier)
			(application
				(value_identifier)
				(int_literal)))))

=====
extraction
=====

let x = (0, 0)#foo 2;

---

(source_file
	(let
		(pattern
			(value_identifier))
		value: (application
			(extraction
				(tuple (int_literal) (int_literal)) (value_identifier))
				(int_literal))))

=====
where
=====
let x = a b
	where
		con a() = c d
	end;

---

(source_file
	(let
		(pattern
			(value_identifier))
		value: (where
			(application
				(value_identifier)
				(value_identifier))
			(lam
				name: (value_identifier)
				(pattern)
				value: (application
					(value_identifier)
					(value_identifier))))))

=====
nested where
=====

con seq () =
    0
    where
        con head () =
            let cond =  %core.ncmp.l (i, n);
			()
            where
                con t() = t
            end;
    end;

---

(source_file
	(lam
		name: (value_identifier)
		(pattern)
		value: (where
			(int_literal)
			(lam
				name: (value_identifier)
				(pattern)
				value: (where
					(let
						(pattern (value_identifier))
						value: (application
							(annex
								module: (value_identifier)
								name: (value_identifier)
								subtag: (value_identifier))
							(tuple (value_identifier) (value_identifier))))
					(tuple)
					(lam
						name: (value_identifier)
						(pattern)
						value: (value_identifier)))))))

=====
fib_seq nested where
=====

con seq {A: Nat} =
    head(0, acc)
    where
        con head (i: Nat, acc: A) =
            let cond = %core.ncmp.l;
            (f, t)#cond ()
            where
                con t() = t
                con f() = exit acc;
            end;
    end;

---

(source_file
	(lam
		name: (value_identifier)
		(pattern
			(pattern (type_identifier) type: (primitive_type)))
		value: (where
			(application
				(value_identifier)
				(tuple (int_literal) (value_identifier)))
			(lam
				name: (value_identifier)
				(pattern
					(pattern (value_identifier) type: (primitive_type))
					(pattern (value_identifier) type: (type_identifier)))
				value: (where
					(let
						(pattern (value_identifier))
						value: (annex
							module: (value_identifier)
							name: (value_identifier)
							subtag: (value_identifier)))
					(application
						(extraction
							(tuple (value_identifier) (value_identifier))
							(value_identifier))
						(tuple))
					(lam
						name: (value_identifier)
						(pattern)
						value: (value_identifier))
					(lam
						name: (value_identifier)
						(pattern)
						value: (application
							(value_identifier)
							(value_identifier))))))))

=====
nested where 2
=====

con seq {A: Nat} =
	_
	where
		con t() = t
		where
			con blub() = _;
		end
		con f() = exit acc;
	end;

---

(source_file
	(lam
		name: (value_identifier)
		(pattern
			(pattern (type_identifier) type: (primitive_type)))
		value: (where
			(value_identifier)
			(lam
				name: (value_identifier)
				(pattern)
				value: (where
					(value_identifier)
					(lam
						name: (value_identifier)
						(pattern)
						value: (value_identifier))))
			(lam
				name: (value_identifier)
				(pattern)
				value: (application
					(value_identifier)
					(value_identifier))))))

=====
no semicolon
=====

con t = t
where
    con blub() = _;
end
con f = exit;

---

(source_file
	(lam
		name: (value_identifier)
		value: (where
			(value_identifier)
			(lam
				name: (value_identifier)
				(pattern)
				value: (value_identifier))))
	(lam
		name: (value_identifier)
		value: (value_identifier)))

=====
annex float lit
=====

con continue = %core.nat.add;

---

(source_file
	(lam
		name: (value_identifier)
		value: (annex
			module: (value_identifier)
			name: (value_identifier)
			subtag: (value_identifier))))
